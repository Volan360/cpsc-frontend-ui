<div class="dashboard-container">
  <div class="welcome-section">
    <h1>Welcome to CPSC Cornerstone</h1>
    <p class="subtitle">Your financial overview at a glance</p>
  </div>

  <!-- Loading Spinner -->
  <div class="loading-container" *ngIf="loading">
    <mat-spinner></mat-spinner>
    <p>Loading your financial data...</p>
  </div>

  <div *ngIf="!loading">
      <!-- Stats Cards -->
      <div class="stats-grid">
        <mat-card class="stat-card balance-card">
          <div class="stat-icon">
            <mat-icon>account_balance_wallet</mat-icon>
          </div>
          <div class="stat-content">
            <div class="stat-label">Total Balance</div>
            <div class="stat-value">{{ totalBalance | currency }}</div>
          </div>
        </mat-card>

        <mat-card class="stat-card goals-card">
          <div class="stat-icon">
            <mat-icon>flag</mat-icon>
          </div>
          <div class="stat-content">
            <div class="stat-label">Active Goals</div>
            <div class="stat-value">{{ activeGoalsCount }}</div>
          </div>
        </mat-card>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions-section">
        <h2 class="section-title">Quick Actions</h2>
        <div class="cards-grid">
          <mat-card class="dashboard-card" (click)="navigateToInstitutions()">
            <mat-card-header>
              <mat-icon mat-card-avatar class="card-icon">account_balance</mat-icon>
              <mat-card-title>Financial Institutions</mat-card-title>
              <mat-card-subtitle>Manage your accounts</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>View and manage your financial institutions and track balances.</p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button color="primary">View Institutions</button>
            </mat-card-actions>
          </mat-card>

          <mat-card class="dashboard-card" (click)="navigateToGoals()">
            <mat-card-header>
              <mat-icon mat-card-avatar class="card-icon">flag</mat-icon>
              <mat-card-title>Goals</mat-card-title>
              <mat-card-subtitle>Track your savings goals</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>Create and manage savings goals linked to your institutions.</p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button color="primary">View Goals</button>
            </mat-card-actions>
          </mat-card>

          <mat-card class="dashboard-card">
            <mat-card-header>
              <mat-icon mat-card-avatar class="card-icon">analytics</mat-icon>
              <mat-card-title>Analytics</mat-card-title>
              <mat-card-subtitle>View your analytics data</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>Access detailed analytics and insights about your data.</p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button color="primary">View Analytics</button>
            </mat-card-actions>
          </mat-card>

          <mat-card class="dashboard-card">
            <mat-card-header>
              <mat-icon mat-card-avatar class="card-icon">description</mat-icon>
              <mat-card-title>Reports</mat-card-title>
              <mat-card-subtitle>Generate and view reports</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>Create custom reports and export your data.</p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button color="primary">View Reports</button>
            </mat-card-actions>
          </mat-card>

          <mat-card class="dashboard-card" (click)="navigateToProfileSettings()">
            <mat-card-header>
              <mat-icon mat-card-avatar class="card-icon">settings</mat-icon>
              <mat-card-title>Profile Settings</mat-card-title>
              <mat-card-subtitle>Manage your account</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>Update your screen name and manage account settings.</p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button color="primary">Open Settings</button>
            </mat-card-actions>
          </mat-card>

          <mat-card class="dashboard-card help-card" (click)="navigateToHelp()">
            <mat-card-header>
              <mat-icon mat-card-avatar class="card-icon">help_outline</mat-icon>
              <mat-card-title>Help & Documentation</mat-card-title>
              <mat-card-subtitle>Learn how to use the app</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p>Get help and learn about all the features available.</p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button color="primary">View Help</button>
            </mat-card-actions>
          </mat-card>
        </div>
      </div>

      <!-- Recent Transactions -->
      <div class="recent-transactions-section" *ngIf="recentTransactions.length > 0" style="margin-top: 2rem;">
        <h2 class="section-title">Recent Transactions</h2>
        <mat-card class="transactions-card">
          <div class="transaction-item" *ngFor="let transaction of recentTransactions" (click)="navigateToInstitutionDetail(transaction.institutionId)">
            <div class="transaction-icon">
              <mat-icon [class.positive]="transaction.type === 'DEPOSIT'" [class.negative]="transaction.type === 'WITHDRAWAL'">
                {{ transaction.type === 'DEPOSIT' ? 'south' : 'north' }}
              </mat-icon>
            </div>
            <div class="transaction-details">
              <div class="transaction-institution">{{ getInstitutionName(transaction.institutionId) }}</div>
              <div class="transaction-note" *ngIf="transaction.description">{{ transaction.description }}</div>
              <div class="transaction-date">{{ (transaction.transactionDate * 1000) | date: 'short' }}</div>
            </div>
            <div class="transaction-amount" [class.positive]="transaction.type === 'DEPOSIT'" [class.negative]="transaction.type === 'WITHDRAWAL'">
              {{ transaction.amount | currency }}
            </div>
          </div>
        </mat-card>
      </div>
    </div>
</div>
